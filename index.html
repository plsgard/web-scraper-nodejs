<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
            <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
            <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<style>
    body {
        padding-top: 30px;
    }
</style>
    </head>
        <body>
            <div class="container-fluid">
                <div class="row">
                    <main class="col-md-12 ml-sm-auto pt-3 px-4" role="main">
                        <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pb-2 mb-3 border-bottom">
            <h1 class="h2">LaFabrique AVIVA - Stats</h1>
                <div class="btn-toolbar mb-2 mb-md-0"><button class="btn btn-primary" id="reload">Reload</button></div>
        </div>
            <div class="row" id="results">
                </div>
    </main>
</div>
        </div>
        <script>
            $(function(){
                $("#reload").on("click", function(e){
                    e.preventDefault();
                    $("#results").html("<div class=\"progress\"><div class=\"progress-bar progress-bar-striped progress-bar-animated bg-danger\" role=\"progressbar\" aria-valuenow=\"1\" aria-valuemin=\"0\" aria-valuemax=\"100\" style=\"width: 1%\"></div></div>");
                    $.ajax({
  xhr: function()
  {
    var xhr = new window.XMLHttpRequest();
    //Download progress
    xhr.addEventListener("progress", function(evt){
      if (evt.lengthComputable) {
        var percentComplete = evt.loaded / evt.total;
        percentComplete = parseInt(percentComplete * 100);
        $('.progress-bar').width(percentComplete + '%');
        console.log(percentComplete);
      }
    }, false);
    return xhr;
  },
  type: 'GET',
  url: "/stats",
  success: function(data){
    $("#results").html(data);
  }
});
                });
            });
        </script>
        </body>
        </html>